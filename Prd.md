# é—²é±¼ä»£å†™åŠ©æ‰‹ - äº§å“éœ€æ±‚æ–‡æ¡£ (PRD)

> ç‰ˆæœ¬ï¼šV4.0
> åˆ›å»ºæ—¥æœŸï¼š2025-12-29
> æ›´æ–°æ—¥æœŸï¼š2026-01-02
> çŠ¶æ€ï¼šV4 å·²å®Œæˆ

---

## ä¸€ã€æ ¸å¿ƒç›®æ ‡ (Mission)

**è®©é—²é±¼ä»£å†™å–å®¶èƒ½å¤Ÿä¸“ä¸šã€é«˜æ•ˆåœ°å›å¤ä¹°å®¶å’¨è¯¢ï¼Œé€šè¿‡æ™ºèƒ½éœ€æ±‚æŒ–æ˜æå‡æˆäº¤ç‡ã€‚**

---

## äºŒã€ç”¨æˆ·ç”»åƒ (Persona)

| å±æ€§ | æè¿° |
|------|------|
| **èº«ä»½** | é—²é±¼å¹³å°æ–‡ç« ä»£å†™æœåŠ¡å–å®¶ |
| **æ ¸å¿ƒç—›ç‚¹** | é¢å¯¹å¤šæ ·åŒ–çš„ä»£å†™éœ€æ±‚æ—¶ï¼Œä¸çŸ¥å¦‚ä½•ä¸“ä¸šå›å¤ï¼Œå®¹æ˜“ä¸¢å¤±å®¢æˆ· |
| **æœŸæœ›** | å¿«é€Ÿç”Ÿæˆä¸“ä¸šå›å¤ï¼Œè‡ªåŠ¨æŒ–æ˜é—æ¼éœ€æ±‚ï¼Œç»™å‡ºåˆç†æŠ¥ä»·èŒƒå›´ |
| **ä½¿ç”¨åœºæ™¯** | æ”¶åˆ°ä¹°å®¶å’¨è¯¢åï¼Œå¤åˆ¶æ¶ˆæ¯åˆ°å·¥å…·ï¼Œè·å–ä¸“ä¸šå›å¤å»ºè®® |

---

## ä¸‰ã€ç‰ˆæœ¬è§„åˆ’

### V1: æœ€å°å¯è¡Œäº§å“ (MVP) - å·²å®Œæˆ

| æ¨¡å— | åŠŸèƒ½æè¿° | çŠ¶æ€ |
|------|----------|------|
| **1. å¤§æ¨¡å‹é…ç½®** | æ”¯æŒè‡ªå®šä¹‰é…ç½®ï¼šBase URLã€API Keyã€æ¨¡å‹IDï¼›é…ç½®æŒä¹…åŒ–å­˜å‚¨åˆ°æœ¬åœ° | âœ… |
| **2. æ¶ˆæ¯è¾“å…¥** | æ–‡æœ¬æ¡†æ”¯æŒç²˜è´´ä¹°å®¶æ¶ˆæ¯ï¼Œä¸€é”®æ¸…ç©º | âœ… |
| **3. æ™ºèƒ½åˆ†æ** | è¯†åˆ«æ–‡ç« ç±»å‹ï¼ˆ24ç§ï¼‰ã€æå–å·²çŸ¥ä¿¡æ¯ã€è¯†åˆ«ç¼ºå¤±ä¿¡æ¯ | âœ… |
| **4. å›å¤ç”Ÿæˆ** | ç”Ÿæˆäº²åˆ‡å‹å¥½ä¸“ä¸šçš„è¯æœ¯ï¼Œè‡ªåŠ¨è¿½é—®é—æ¼éœ€æ±‚ï¼Œæ”¯æŒä¸€é”®å¤åˆ¶ | âœ… |
| **5. æ™ºèƒ½æŠ¥ä»·** | æ ¹æ®ç±»å‹/å­—æ•°/å¤æ‚åº¦/ç´§æ€¥ç¨‹åº¦ç»™å‡ºä»·æ ¼åŒºé—´åŠè®¡ç®—ä¾æ® | âœ… |
| **6. æœåŠ¡é€ŸæŸ¥** | å±•ç¤º24ç§æœåŠ¡ç±»å‹åŠä»·æ ¼ï¼Œæ”¯æŒæœç´¢ç­›é€‰ | âœ… |
| **7. æç¤ºè¯é…ç½®** | æ”¯æŒåœ¨å‰ç«¯ç¼–è¾‘åˆ†ææç¤ºè¯å’Œç³»ç»Ÿæç¤ºè¯ | âœ… |

### V2: å†å²è®°å½•ä¸æ¨¡æ¿åº“ - å·²å®Œæˆ

| æ¨¡å— | åŠŸèƒ½æè¿° | çŠ¶æ€ |
|------|----------|------|
| **1. å†å²è®°å½•** | è‡ªåŠ¨ä¿å­˜æ¯æ¬¡åˆ†æè®°å½•ï¼Œæ”¯æŒæŸ¥çœ‹è¯¦æƒ… | âœ… |
| **2. æ ‡ç­¾é¡µåˆ‡æ¢** | é¡¶éƒ¨æ ‡ç­¾é¡µåˆ‡æ¢"æ¶ˆæ¯åˆ†æ"å’Œ"å†å²è®°å½•" | âœ… |
| **3. æˆäº¤æ ‡è®°** | å¯æ ‡è®°æ¯æ¡è®°å½•çš„æˆäº¤çŠ¶æ€ï¼ˆå¾…å®š/å·²æˆäº¤/æœªæˆäº¤ï¼‰ | âœ… |
| **4. æ–‡ç« ç±»å‹æ ‡è®°** | å¯æ ‡è®°å®é™…æ–‡ç« ç±»å‹ï¼Œæ”¯æŒè‡ªå®šä¹‰ç±»å‹ | âœ… |
| **5. æœç´¢ç­›é€‰** | æ”¯æŒæŒ‰æ¶ˆæ¯å†…å®¹æœç´¢ã€æŒ‰ç±»å‹å’ŒçŠ¶æ€ç­›é€‰ | âœ… |
| **6. å›å¤æ¨¡æ¿åº“** | é¢„è®¾8ä¸ªå¸¸ç”¨è¯æœ¯æ¨¡æ¿ï¼Œæ”¯æŒå¢åˆ æ”¹ | âœ… |
| **7. æ¨¡æ¿æ’å…¥** | å¯å°†æ¨¡æ¿ä¸€é”®æ’å…¥åˆ°ç”Ÿæˆçš„å›å¤ä¸­ | âœ… |
| **8. å›å¤ç¼–è¾‘** | æ”¯æŒæ‰‹åŠ¨ç¼–è¾‘ç”Ÿæˆçš„å›å¤å†…å®¹ | âœ… |

### V3: å¯¹è¯å¼åŠ©æ‰‹ - å·²å®Œæˆ

| æ¨¡å— | åŠŸèƒ½æè¿° | çŠ¶æ€ |
|------|----------|------|
| **1. å›å¤æ¸…å•** | è¿”å›å¤šä¸ªå¯é€‰å›å¤ï¼ˆ3-5ä¸ªï¼‰ï¼Œæ¯ä¸ªæœ‰ç‹¬ç«‹å¤åˆ¶æŒ‰é’® | âœ… |
| **2. å¯¹è¯ä¼šè¯** | å¼•å…¥"ä¼šè¯"æ¦‚å¿µï¼Œä¸€ä¸ªä¹°å®¶=ä¸€ä¸ªä¼šè¯ï¼Œæ”¯æŒå¤šè½®å¯¹è¯ | âœ… |
| **3. ä¸Šä¸‹æ–‡ä¿æŒ** | å¯¹è¯ä¿æŒè¿ç»­æ€§ï¼ŒAI ç»“åˆå†å²æ¶ˆæ¯ç»™å‡ºå»ºè®® | âœ… |
| **4. åˆ†é˜¶æ®µä¿¡æ¯** | å…ˆå›å¤å»ºè®® â†’ ä¿¡æ¯è¶³å¤Ÿæ—¶æç¤ºæŠ¥ä»· â†’ æˆäº¤æˆ–æŒ½ç•™ | âœ… |
| **5. ä¼šè¯çŠ¶æ€** | ä¼šè¯çŠ¶æ€ç®¡ç†ï¼ˆè¿›è¡Œä¸­/å·²ç»“æŸï¼‰ï¼ŒåŒºåˆ†æ´»è·ƒå’Œå†å²å¯¹è¯ | âœ… |
| **6. ä¼šè¯ç»“æŸæ ‡è®°** | ç»“æŸæ—¶æ ‡è®°ï¼šæˆäº¤çŠ¶æ€ã€æˆäº¤ä»·æ ¼ã€æ–‡ç« ç±»å‹ | âœ… |
| **7. éœ€æ±‚è¦ç‚¹æç‚¼** | æˆäº¤æ—¶è‡ªåŠ¨æç‚¼ç”¨æˆ·éœ€æ±‚è¦ç‚¹ï¼ˆç±»å‹ã€å­—æ•°ã€æˆªæ­¢ã€è¦æ±‚ç­‰ï¼‰ | âœ… |
| **8. æŒ½ç•™è¯æœ¯** | æœªæˆäº¤æ—¶æä¾›å¯é…ç½®çš„æŒ½ç•™è¯æœ¯æ¨¡æ¿ | âœ… |
| **9. å¿«æ·å›å¤æ ‡ç­¾** | å¸¸ç”¨å¿«æ·æ ‡ç­¾ï¼ˆè¯¢é—®å­—æ•°ã€æˆªæ­¢æ—¶é—´ç­‰ï¼‰ï¼Œç‚¹å‡»å³æ’å…¥ | âœ… |
| **10. æŠ¥ä»·æ—¶æœºåˆ¤æ–­** | æ£€æµ‹ä¿¡æ¯æ˜¯å¦è¶³å¤Ÿï¼Œè‡ªåŠ¨æç¤º"å¯ä»¥æŠ¥ä»·" | âœ… |
| **11. å†å²è®°å½•åˆ é™¤** | æ¯æ¡å†å²è®°å½•æ·»åŠ åˆ é™¤æŒ‰é’® | âœ… |
| **12. æç¤ºè¯ç®¡ç†** | ç»Ÿä¸€ç®¡ç†æ‰€æœ‰æç¤ºè¯ï¼ˆå¿«é€Ÿåˆ†æã€ç³»ç»Ÿã€å¯¹è¯åˆ†æã€æŒ½ç•™è¯æœ¯ï¼‰ | âœ… |

### V4: ç§»åŠ¨ç«¯é€‚é… - å·²å®Œæˆ

| æ¨¡å— | åŠŸèƒ½æè¿° | çŠ¶æ€ |
|------|----------|------|
| **1. å“åº”å¼å¸ƒå±€** | æ¡Œé¢ç«¯ä¾§è¾¹æ ï¼Œç§»åŠ¨ç«¯åº•éƒ¨å¯¼èˆªæ  | âœ… |
| **2. å¯¹è¯é¢æ¿é€‚é…** | ç§»åŠ¨ç«¯ä¸Šä¸‹å¸ƒå±€ï¼Œæ¨èå›å¤å¼¹çª—æ˜¾ç¤º | âœ… |
| **3. è§¦æ‘¸ä¼˜åŒ–** | æŒ‰é’®å°ºå¯¸ã€é—´è·é€‚é…è§¦æ‘¸æ“ä½œ | âœ… |
| **4. å®‰å…¨åŒºåŸŸ** | æ”¯æŒ iPhone åº•éƒ¨å®‰å…¨åŒºåŸŸ | âœ… |
| **5. å¤åˆ¶åŠŸèƒ½ä¿®å¤** | å…¼å®¹ HTTP ç¯å¢ƒçš„å‰ªè´´æ¿æ“ä½œ | âœ… |
| **6. ç§»é™¤å†—ä½™åŠŸèƒ½** | ç§»é™¤æ— æ•ˆçš„"ä½¿ç”¨"æŒ‰é’®å’Œå¿«æ·æ ‡ç­¾ | âœ… |
| **7. å‹å¥½é”™è¯¯æç¤º** | API é”™è¯¯æ—¶æ˜¾ç¤ºå…·ä½“åŸå› å’Œè§£å†³å»ºè®® | âœ… |
| **8. åˆ†æé‡è¯•åŠŸèƒ½** | åˆ†æå¤±è´¥åå¯ä¸€é”®é‡è¯•ï¼Œæ— éœ€é‡æ–°è¾“å…¥ | âœ… |

### V5 åŠä»¥åç‰ˆæœ¬ (Future Releases)

| ç‰ˆæœ¬ | åŠŸèƒ½ | æè¿° |
|------|------|------|
| V5 | æˆäº¤ç»Ÿè®¡åˆ†æ | å„ç±»å‹æˆäº¤ç‡ç»Ÿè®¡ï¼Œå‘ç°é«˜ä»·å€¼æœåŠ¡ |
| V5 | æ•°æ®å¯¼å‡º | å†å²è®°å½•å¯¼å‡ºä¸ºExcel |
| V5 | å®¢æˆ·ç®¡ç† | å›å¤´å®¢ä¿¡æ¯å’Œåå¥½è®°å½• |
| V6 | è®¢å•è·Ÿè¸ª | è¿›è¡Œä¸­è®¢å•çŠ¶æ€ç®¡ç† |
| V6 | å¤šç«¯åŒæ­¥ | æ•°æ®äº‘ç«¯åŒæ­¥ |

---

## å››ã€å…³é”®ä¸šåŠ¡é€»è¾‘ (Business Rules)

### 4.1 æœåŠ¡ç±»å‹ä¸å®šä»·ï¼ˆ24ç§ï¼‰

| åºå· | æœåŠ¡ç±»å‹ | ç®€å•(å…ƒ/åƒå­—) | å¤æ‚(å…ƒ/åƒå­—) | å¤‡æ³¨ |
|------|----------|---------------|---------------|------|
| 1 | æ¼”è®²ç¨¿ | 40 | 80 | |
| 2 | æ–°é—»ç¨¿ã€æŠ¥é“ç¨¿ | 80 | 160 | éœ€è¦çœ‹ææ–™ |
| 3 | å®ä¹ /è°ƒæŸ¥æŠ¥å‘Šï¼ˆå«é—®å·æ•°æ®åˆ†æï¼‰ | 60 | 80 | |
| 4 | å®ä¹ /è°ƒæŸ¥æŠ¥å‘Šï¼ˆä¸å«é—®å·ï¼‰ | 40 | 60 | |
| 5 | å…¬ä¼—å·æ–‡ç« ã€å°çº¢ä¹¦æ–‡æ¡ˆ | 50 | 80 | |
| 6 | æ¶¦è‰²ç®€å† | 50 | 80 | |
| 7 | å…¬æ–‡ä½“å†™ä½œ | 100 | 300 | |
| 8 | å…¬æ–‡ä½“å†™ä½œï¼ˆéœ€çœ‹ææ–™ï¼‰ | 300 | 500 | |
| 9 | ç­–åˆ’æ¡ˆ | 200 | 800 | æŒ‰ç¯‡è®¡ä»· |
| 10 | å•†ä¸šè®¡åˆ’ä¹¦ï¼ˆå•†ç”¨ï¼‰ | 200 | 800 | |
| 11 | å•†ä¸šè®¡åˆ’ä¹¦ï¼ˆä½œä¸šï¼‰ | 50 | 80 | |
| 12 | è¯¾é¢˜ç”³æŠ¥ä¹¦ã€é«˜æ ¡ç”³æŠ¥ | 300 | 800 | |
| 13 | å¾æ–‡ | 40 | 100 | |
| 14 | ç•™å­¦æ–‡ä¹¦ | - | 500 | |
| 15 | å·¥ä½œå‘¨æŠ¥æœˆæŠ¥ | 30 | 50 | |
| 16 | è‹±æ–‡æŠ¥å‘Š | 80 | 100 | |
| 17 | è¯—æ­Œ/æ•£æ–‡/æ£€è®¨/ä¿¡ä»¶/ç¿»è¯‘/æƒ…ä¹¦/æ–‡æ¡ˆ | 40 | 60 | |
| 18 | æ‰‹å†™ | 20 | - | |
| 19 | PPT | 5 | 10 | æŒ‰é¡µè®¡ä»· |
| 20 | æ•°æ®åˆ†æ/è‚¡ç¥¨æŠ•èµ„åˆ†ææŠ¥å‘Š | 120 | 240 | |
| 21 | æ•™æ¡ˆå’Œè¯¾é¢˜è®¾è®¡ | 80 | 240 | |
| 22 | å‰§æœ¬/ç›´æ’­ç¨¿ | 90 | 180 | |
| 23 | æ–‡çŒ®ç»¼è¿° | 80 | 120 | |
| 24 | çœ‹è§†é¢‘å†™æ–‡æ¡ˆ | 10 | 25 | æŒ‰åˆ†é’Ÿè®¡ä»· |

**æœ€ä½é™åˆ¶ï¼šæ‰€æœ‰ç±»å‹æŠ¥ä»·ä¸ä½äºåƒå­—20å…ƒ**

### 4.2 æŠ¥ä»·è®¡ç®—è§„åˆ™

```
æŠ¥ä»·åŒºé—´ = åŸºç¡€å•ä»·(åƒå­—) Ã— å­—æ•° Ã· 1000 Ã— å¤æ‚åº¦ç³»æ•° Ã— ç´§æ€¥ç³»æ•°

å¤æ‚åº¦ç³»æ•°ï¼š
  - ç®€å•è¦æ±‚ï¼š1.0
  - å¤æ‚è¦æ±‚ï¼š1.5 - 2.0

ç´§æ€¥ç³»æ•°ï¼š
  - æ­£å¸¸ï¼ˆ3å¤©ä»¥ä¸Šï¼‰ï¼š1.0
  - åŠ æ€¥ï¼ˆ1-3å¤©ï¼‰ï¼š1.3
  - ç‰¹æ€¥ï¼ˆ24å°æ—¶å†…ï¼‰ï¼š1.5 - 2.0
```

### 4.3 å¿…é¡»æŒ–æ˜çš„éœ€æ±‚æ¸…å•

| éœ€æ±‚é¡¹ | é€‚ç”¨ç±»å‹ | è¿½é—®è¯æœ¯ç¤ºä¾‹ |
|--------|----------|--------------|
| å­—æ•°è¦æ±‚ | å…¨éƒ¨ | "è¯·é—®æ‚¨å¯¹å­—æ•°æœ‰å…·ä½“è¦æ±‚å—ï¼Ÿ" |
| äº¤ä»˜æ—¶é—´ | å…¨éƒ¨ | "æ‚¨å¸Œæœ›ä»€ä¹ˆæ—¶å€™äº¤ç¨¿å‘¢ï¼Ÿ" |
| å‚è€ƒææ–™ | æ–°é—»ç¨¿ã€å…¬æ–‡ã€è°ƒæŸ¥æŠ¥å‘Šç­‰ | "æ‚¨è¿™è¾¹æœ‰ç›¸å…³ææ–™å¯ä»¥æä¾›å—ï¼Ÿ" |
| æ ¼å¼è¦æ±‚ | è®ºæ–‡ã€å…¬æ–‡ã€ç”³æŠ¥ä¹¦ | "å¯¹æ ¼å¼æœ‰ç‰¹æ®Šè¦æ±‚å—ï¼Ÿæ¯”å¦‚å­—ä½“ã€è¡Œè·ç­‰" |
| æŸ¥é‡è¦æ±‚ | å­¦æœ¯ç±» | "éœ€è¦æŸ¥é‡å—ï¼ŸæŸ¥é‡ç‡è¦æ±‚å¤šå°‘ï¼Ÿ" |
| æ•°æ®åˆ†æ | è°ƒæŸ¥æŠ¥å‘Š | "éœ€è¦åŒ…å«é—®å·è®¾è®¡å’Œæ•°æ®åˆ†æå—ï¼Ÿ" |

---

## äº”ã€æ•°æ®å¥‘çº¦ (Data Contract)

### 5.1 å¤§æ¨¡å‹é…ç½®

```typescript
interface LLMConfig {
  baseUrl: string;    // API åœ°å€ï¼Œå¦‚ https://api.openai.com/v1
  apiKey: string;     // API å¯†é’¥
  modelId: string;    // æ¨¡å‹ IDï¼Œå¦‚ gpt-4, claude-3-opus
}
```

### 5.2 æœåŠ¡ç±»å‹æ•°æ®

```typescript
interface ServiceType {
  id: number;                    // æœåŠ¡ID
  name: string;                  // æœåŠ¡åç§°
  priceSimple: number | null;    // ç®€å•è¦æ±‚ä»·æ ¼
  priceComplex: number | null;   // å¤æ‚è¦æ±‚ä»·æ ¼
  unit: 'thousand' | 'page' | 'minute' | 'piece';  // è®¡ä»·å•ä½
  requiresMaterial: boolean;     // æ˜¯å¦éœ€è¦ææ–™
  keywords: string[];            // è¯†åˆ«å…³é”®è¯
}
```

### 5.3 åˆ†æè¯·æ±‚/å“åº”

```typescript
// è¯·æ±‚
interface AnalysisRequest {
  message: string;               // ä¹°å®¶åŸå§‹æ¶ˆæ¯
}

// å“åº”
interface AnalysisResponse {
  // è¯†åˆ«ç»“æœ
  detectedType: ServiceType | null;    // è¯†åˆ«çš„æ–‡ç« ç±»å‹
  possibleTypes: ServiceType[];        // å¯èƒ½çš„ç±»å‹åˆ—è¡¨
  confidence: number;                  // ç½®ä¿¡åº¦ 0-1

  // å·²æå–ä¿¡æ¯
  extractedInfo: {
    topic?: string;                    // ä¸»é¢˜/é¢˜ç›®
    wordCount?: number;                // å­—æ•°è¦æ±‚
    deadline?: string;                 // æˆªæ­¢æ—¥æœŸ
    hasReference?: boolean;            // æ˜¯å¦æœ‰å‚è€ƒææ–™
    specialRequirements?: string[];    // ç‰¹æ®Šè¦æ±‚
  };

  // ç¼ºå¤±ä¿¡æ¯
  missingInfo: string[];               // éœ€è¦è¿½é—®çš„ä¿¡æ¯åˆ—è¡¨

  // ç”Ÿæˆçš„å›å¤
  suggestedReply: string;              // å»ºè®®çš„å›å¤è¯æœ¯

  // æŠ¥ä»·ä¿¡æ¯
  priceEstimate: {
    min: number;                       // æœ€ä½æŠ¥ä»·
    max: number;                       // æœ€é«˜æŠ¥ä»·
    basis: string;                     // æŠ¥ä»·ä¾æ®è¯´æ˜
    canQuote: boolean;                 // ä¿¡æ¯æ˜¯å¦è¶³å¤ŸæŠ¥ä»·
  };
}
```

---

## å…­ã€MVP åŸå‹è®¾è®¡

### é€‰å®šæ–¹æ¡ˆï¼šåŸå‹A - å•é¡µçºµå‘æµå¼å¸ƒå±€

**è®¾è®¡ç†å¿µï¼š** ä»ä¸Šåˆ°ä¸‹çš„æ“ä½œæµç¨‹ï¼Œç®€æ´ç›´è§‚ï¼Œé€‚åˆå¿«é€Ÿæ“ä½œ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  âš™ï¸ é—²é±¼ä»£å†™åŠ©æ‰‹                                    [è®¾ç½®]      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  ğŸ“ ç²˜è´´ä¹°å®¶æ¶ˆæ¯                                        â”‚   â”‚
â”‚  â”‚                                                         â”‚   â”‚
â”‚  â”‚  æ‚¨å¥½ï¼Œæˆ‘æƒ³å†™ä¸€ç¯‡å…³äºäººå·¥æ™ºèƒ½çš„è®ºæ–‡ï¼Œå¤§æ¦‚5000å­—ï¼Œ       â”‚   â”‚
â”‚  â”‚  ä¸‹å‘¨ä¸‰ä¹‹å‰è¦...                                        â”‚   â”‚
â”‚  â”‚                                                         â”‚   â”‚
â”‚  â”‚                                                         â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                 â”‚
â”‚                    [ ğŸ” åˆ†æå¹¶ç”Ÿæˆå›å¤ ]                        â”‚
â”‚                                                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ“Š åˆ†æç»“æœ                                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ ç±»å‹: æ–‡çŒ®ç»¼è¿°   â”‚ â”‚ å­—æ•°: 5000å­—     â”‚ â”‚ æˆªæ­¢: ä¸‹å‘¨ä¸‰    â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                 â”‚
â”‚  âš ï¸ ç¼ºå¤±ä¿¡æ¯: æŸ¥é‡è¦æ±‚ | æ ¼å¼è¦æ±‚ | å‚è€ƒæ–‡çŒ®æ•°é‡                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ’¬ å»ºè®®å›å¤                                          [å¤åˆ¶]    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ æ‚¨å¥½å‘€ï½æ„Ÿè°¢å’¨è¯¢ï¼äººå·¥æ™ºèƒ½è®ºæ–‡5000å­—ä¸‹å‘¨ä¸‰äº¤ä»˜å®Œå…¨      â”‚   â”‚
â”‚  â”‚ æ²¡é—®é¢˜çš„ï½ä¸ºäº†ç»™æ‚¨æ›´å¥½çš„æœåŠ¡ï¼Œæƒ³å†ç¡®è®¤å‡ ä¸ªå°ç»†èŠ‚ï¼š      â”‚   â”‚
â”‚  â”‚ 1. è¯·é—®å¯¹æŸ¥é‡ç‡æœ‰è¦æ±‚å—ï¼Ÿ                               â”‚   â”‚
â”‚  â”‚ 2. æ ¼å¼æ–¹é¢æœ‰ç‰¹æ®Šè¦æ±‚å—ï¼ˆå­—ä½“ã€è¡Œè·ã€å‚è€ƒæ–‡çŒ®æ ¼å¼ï¼‰ï¼Ÿ   â”‚   â”‚
â”‚  â”‚ 3. éœ€è¦åŒ…å«å¤šå°‘ç¯‡å‚è€ƒæ–‡çŒ®å‘¢ï¼Ÿ                           â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ’° æŠ¥ä»·å‚è€ƒ                                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  é¢„ä¼°ä»·æ ¼: Â¥400 - Â¥600                                  â”‚   â”‚
â”‚  â”‚  è®¡ç®—ä¾æ®: æ–‡çŒ®ç»¼è¿° 80-120å…ƒ/åƒå­— Ã— 5åƒå­—               â”‚   â”‚
â”‚  â”‚  âš ï¸ æœ€ç»ˆæŠ¥ä»·éœ€ç¡®è®¤æŸ¥é‡ã€æ ¼å¼ç­‰å…·ä½“è¦æ±‚åç¡®å®š            â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                 â”‚
â”‚  ğŸ“‹ [æŸ¥çœ‹å®Œæ•´ä»·ç›®è¡¨]                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### è®¾ç½®å¼¹çª—

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  âš™ï¸ å¤§æ¨¡å‹é…ç½®                         [Ã—]  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                             â”‚
â”‚  API åœ°å€ (Base URL)                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ https://api.openai.com/v1             â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                             â”‚
â”‚  API å¯†é’¥ (API Key)                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ sk-xxxxâ€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢                   â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                             â”‚
â”‚  æ¨¡å‹ ID                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ gpt-4                                 â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                             â”‚
â”‚           [ æµ‹è¯•è¿æ¥ ]  [ ä¿å­˜é…ç½® ]        â”‚
â”‚                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ä»·ç›®è¡¨å¼¹çª—

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“‹ æœåŠ¡ä»·ç›®è¡¨                                        [Ã—]  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ” æœç´¢æœåŠ¡ç±»å‹...                                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  æœåŠ¡ç±»å‹                    â”‚ ç®€å•(åƒå­—) â”‚ å¤æ‚(åƒå­—)     â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
â”‚  æ¼”è®²ç¨¿                      â”‚    Â¥40    â”‚    Â¥80        â”‚
â”‚  æ–°é—»ç¨¿ã€æŠ¥é“ç¨¿(éœ€çœ‹ææ–™)    â”‚    Â¥80    â”‚    Â¥160       â”‚
â”‚  å…¬ä¼—å·æ–‡ç« ã€å°çº¢ä¹¦æ–‡æ¡ˆ      â”‚    Â¥50    â”‚    Â¥80        â”‚
â”‚  æ–‡çŒ®ç»¼è¿°                    â”‚    Â¥80    â”‚    Â¥120       â”‚
â”‚  ...                         â”‚    ...    â”‚    ...        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ’¡ æ‰€æœ‰ç±»å‹æœ€ä½æŠ¥ä»·ï¼šåƒå­—20å…ƒ                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ä¸ƒã€æ¶æ„è®¾è®¡è“å›¾

### 7.1 ç³»ç»Ÿæ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         ç”¨æˆ·æµè§ˆå™¨                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                    React å‰ç«¯åº”ç”¨                         â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚  â”‚  â”‚æ¶ˆæ¯è¾“å…¥ â”‚ â”‚åˆ†æç»“æœ â”‚ â”‚å›å¤å±•ç¤º â”‚ â”‚ è®¾ç½®/ä»·ç›®è¡¨å¼¹çª— â”‚ â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚  â”‚                         â”‚                                 â”‚ â”‚
â”‚  â”‚              localStorage (é…ç½®å­˜å‚¨)                      â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚ HTTP API
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      FastAPI åç«¯æœåŠ¡                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  /analyze   â”‚ â”‚  /services  â”‚ â”‚  /config (å¯é€‰)         â”‚   â”‚
â”‚  â”‚  æ¶ˆæ¯åˆ†æ   â”‚ â”‚  æœåŠ¡åˆ—è¡¨   â”‚ â”‚  é…ç½®ç®¡ç†               â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚         â”‚                                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                    æ ¸å¿ƒæœåŠ¡å±‚                            â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â”‚
â”‚  â”‚  â”‚ LLM æœåŠ¡   â”‚ â”‚ æŠ¥ä»·è®¡ç®—   â”‚ â”‚ æœåŠ¡ç±»å‹åŒ¹é…       â”‚   â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚         â”‚                                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                    æ•°æ®å±‚                                â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚
â”‚  â”‚  â”‚ æŠ¥ä»·å‚è€ƒ.xlsx      â”‚ â”‚ Prompt æ¨¡æ¿                â”‚  â”‚   â”‚
â”‚  â”‚  â”‚ (æœåŠ¡ç±»å‹/ä»·æ ¼)    â”‚ â”‚ (å›å¤ç”Ÿæˆæ¨¡æ¿)             â”‚  â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      å¤–éƒ¨å¤§æ¨¡å‹ API                             â”‚
â”‚              (OpenAI / Claude / å…¶ä»–å…¼å®¹API)                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 7.2 æ ¸å¿ƒæµç¨‹å›¾

```mermaid
sequenceDiagram
    participant U as ç”¨æˆ·
    participant F as Reactå‰ç«¯
    participant B as FastAPIåç«¯
    participant L as å¤§æ¨¡å‹API

    U->>F: ç²˜è´´ä¹°å®¶æ¶ˆæ¯
    U->>F: ç‚¹å‡»"åˆ†æå¹¶ç”Ÿæˆå›å¤"

    F->>F: ä»localStorageè¯»å–LLMé…ç½®
    F->>B: POST /analyze {message, llmConfig}

    B->>B: åŠ è½½æœåŠ¡ç±»å‹æ•°æ®(Excel)
    B->>B: æ„å»ºPrompt(æ¶ˆæ¯+æœåŠ¡åˆ—è¡¨+ä¸šåŠ¡è§„åˆ™)
    B->>L: è°ƒç”¨å¤§æ¨¡å‹API
    L-->>B: è¿”å›åˆ†æç»“æœ(JSON)

    B->>B: è§£æå“åº”ï¼Œè®¡ç®—æŠ¥ä»·åŒºé—´
    B-->>F: è¿”å› AnalysisResponse

    F->>F: å±•ç¤ºåˆ†æç»“æœã€å»ºè®®å›å¤ã€æŠ¥ä»·
    U->>F: ç‚¹å‡»"å¤åˆ¶"
    F->>F: å¤åˆ¶åˆ°å‰ªè´´æ¿
    U->>U: ç²˜è´´åˆ°é—²é±¼å›å¤ä¹°å®¶
```

### 7.3 ç›®å½•ç»“æ„

```
xianyu_answer/
â”œâ”€â”€ frontend/                    # React å‰ç«¯
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ components/          # UI ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ MessageInput.tsx     # æ¶ˆæ¯è¾“å…¥æ¡†
â”‚   â”‚   â”‚   â”œâ”€â”€ AnalysisResult.tsx   # åˆ†æç»“æœå±•ç¤º
â”‚   â”‚   â”‚   â”œâ”€â”€ ReplySection.tsx     # å»ºè®®å›å¤åŒº
â”‚   â”‚   â”‚   â”œâ”€â”€ PriceEstimate.tsx    # æŠ¥ä»·å±•ç¤º
â”‚   â”‚   â”‚   â”œâ”€â”€ SettingsModal.tsx    # è®¾ç½®å¼¹çª—
â”‚   â”‚   â”‚   â””â”€â”€ PriceListModal.tsx   # ä»·ç›®è¡¨å¼¹çª—
â”‚   â”‚   â”œâ”€â”€ hooks/
â”‚   â”‚   â”‚   â””â”€â”€ useLocalStorage.ts   # æœ¬åœ°å­˜å‚¨Hook
â”‚   â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”‚   â””â”€â”€ api.ts               # API è°ƒç”¨
â”‚   â”‚   â”œâ”€â”€ types/
â”‚   â”‚   â”‚   â””â”€â”€ index.ts             # TypeScript ç±»å‹å®šä¹‰
â”‚   â”‚   â”œâ”€â”€ App.tsx
â”‚   â”‚   â””â”€â”€ main.tsx
â”‚   â”œâ”€â”€ package.json
â”‚   â””â”€â”€ vite.config.ts
â”‚
â”œâ”€â”€ backend/                     # Python åç«¯
â”‚   â”œâ”€â”€ app/
â”‚   â”‚   â”œâ”€â”€ main.py                  # FastAPI å…¥å£
â”‚   â”‚   â”œâ”€â”€ routers/
â”‚   â”‚   â”‚   â”œâ”€â”€ analyze.py           # /analyze è·¯ç”±
â”‚   â”‚   â”‚   â””â”€â”€ services.py          # /services è·¯ç”±
â”‚   â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”‚   â”œâ”€â”€ llm_service.py       # å¤§æ¨¡å‹è°ƒç”¨æœåŠ¡
â”‚   â”‚   â”‚   â”œâ”€â”€ price_service.py     # æŠ¥ä»·è®¡ç®—æœåŠ¡
â”‚   â”‚   â”‚   â””â”€â”€ type_matcher.py      # ç±»å‹åŒ¹é…æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ models/
â”‚   â”‚   â”‚   â””â”€â”€ schemas.py           # Pydantic æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ prompts/
â”‚   â”‚   â”‚   â””â”€â”€ analyze_prompt.py    # Prompt æ¨¡æ¿
â”‚   â”‚   â””â”€â”€ data/
â”‚   â”‚       â””â”€â”€ services_loader.py   # Excel æ•°æ®åŠ è½½
â”‚   â”œâ”€â”€ requirements.txt
â”‚   â””â”€â”€ run.py
â”‚
â”œâ”€â”€ æŠ¥ä»·å‚è€ƒ.xlsx                # æœåŠ¡ç±»å‹ä¸ä»·æ ¼æ•°æ®
â”œâ”€â”€ CLAUDE.md                    # å¼€å‘æŒ‡å—
â”œâ”€â”€ Prd.md                       # æœ¬æ–‡æ¡£
â””â”€â”€ README.md
```

### 7.4 ç»„ä»¶äº¤äº’è¯´æ˜

#### å‰ç«¯ç»„ä»¶

| ç»„ä»¶ | èŒè´£ | äº¤äº’ |
|------|------|------|
| `App.tsx` | ä¸»å®¹å™¨ï¼ŒçŠ¶æ€ç®¡ç† | ç®¡ç†å…¨å±€çŠ¶æ€ï¼Œåè°ƒå­ç»„ä»¶ |
| `MessageInput` | æ¶ˆæ¯è¾“å…¥ | å‘ä¸Šä¼ é€’æ¶ˆæ¯å†…å®¹ |
| `AnalysisResult` | åˆ†æç»“æœå±•ç¤º | æ¥æ”¶å¹¶å±•ç¤ºåˆ†ææ•°æ® |
| `ReplySection` | å›å¤å±•ç¤º+å¤åˆ¶ | æ¥æ”¶å›å¤å†…å®¹ï¼Œå¤„ç†å¤åˆ¶ |
| `PriceEstimate` | æŠ¥ä»·å±•ç¤º | æ¥æ”¶æŠ¥ä»·æ•°æ® |
| `SettingsModal` | LLMé…ç½® | è¯»å†™ localStorage |
| `PriceListModal` | ä»·ç›®è¡¨ | è°ƒç”¨ /services API |

#### åç«¯æ¨¡å—

| æ¨¡å— | èŒè´£ | ä¾èµ– |
|------|------|------|
| `main.py` | FastAPI åº”ç”¨å…¥å£ | routers/* |
| `analyze.py` | åˆ†ææ¥å£ | llm_service, price_service |
| `llm_service.py` | å¤§æ¨¡å‹è°ƒç”¨å°è£… | httpx/aiohttp |
| `price_service.py` | æŠ¥ä»·è®¡ç®— | services_loader |
| `services_loader.py` | åŠ è½½Excelæ•°æ® | pandas, openpyxl |

### 7.5 æŠ€æœ¯é€‰å‹

| å±‚çº§ | æŠ€æœ¯ | ç‰ˆæœ¬ | é€‰å‹ç†ç”± |
|------|------|------|----------|
| **å‰ç«¯æ¡†æ¶** | React | 18.x | ç”¨æˆ·æŒ‡å®šï¼Œç”Ÿæ€æˆç†Ÿ |
| **å‰ç«¯æ„å»º** | Vite | 5.x | å¿«é€Ÿå¼€å‘ï¼ŒHMRæ”¯æŒ |
| **å‰ç«¯æ ·å¼** | Tailwind CSS | 3.x | å¿«é€Ÿå¼€å‘ï¼Œå“åº”å¼ |
| **å‰ç«¯è¯­è¨€** | TypeScript | 5.x | ç±»å‹å®‰å…¨ |
| **åç«¯æ¡†æ¶** | FastAPI | 0.100+ | å¼‚æ­¥é«˜æ€§èƒ½ï¼Œè‡ªåŠ¨æ–‡æ¡£ |
| **Pythonç‰ˆæœ¬** | 3.11 | - | condaç¯å¢ƒå·²é…ç½® |
| **æ•°æ®å¤„ç†** | pandas | 2.x | Excelè¯»å– |
| **HTTPå®¢æˆ·ç«¯** | httpx | 0.25+ | å¼‚æ­¥è¯·æ±‚å¤§æ¨¡å‹API |
| **éƒ¨ç½²** | å®å¡”é¢æ¿ | - | ç”¨æˆ·å·²æœ‰ç¯å¢ƒ |

### 7.6 æ½œåœ¨æŠ€æœ¯é£é™©

| é£é™© | å½±å“ | ç¼“è§£æªæ–½ |
|------|------|----------|
| **å¤§æ¨¡å‹APIä¸ç¨³å®š** | è¯·æ±‚è¶…æ—¶æˆ–å¤±è´¥ | è®¾ç½®è¶…æ—¶æ—¶é—´ï¼Œå‹å¥½é”™è¯¯æç¤ºï¼Œæ”¯æŒé‡è¯• |
| **å¤§æ¨¡å‹è¿”å›æ ¼å¼ä¸ä¸€è‡´** | è§£æå¤±è´¥ | ä½¿ç”¨ç»“æ„åŒ–è¾“å‡º(JSON mode)ï¼Œå¢åŠ å®¹é”™å¤„ç† |
| **API Keyæ³„éœ²** | å®‰å…¨é£é™© | å‰ç«¯ä¸ç›´æ¥è°ƒç”¨å¤§æ¨¡å‹ï¼ŒKeyä»…å­˜åç«¯æˆ–ç”¨æˆ·æœ¬åœ° |
| **Excelæ•°æ®å˜æ›´** | ä»·æ ¼ä¸åŒæ­¥ | æä¾›æ•°æ®åˆ·æ–°æœºåˆ¶ï¼Œæˆ–æ”¹ç”¨æ•°æ®åº“(V2) |
| **è·¨åŸŸé—®é¢˜** | å‰åç«¯é€šä¿¡å¤±è´¥ | å¼€å‘æ—¶é…ç½®ä»£ç†ï¼Œç”Ÿäº§æ—¶åŒæºéƒ¨ç½² |

---

## å…«ã€éƒ¨ç½²æ–¹æ¡ˆ

### 8.1 æœåŠ¡å™¨ä¿¡æ¯

| é¡¹ç›® | å€¼ |
|------|-----|
| äº‘æœåŠ¡å•† | è…¾è®¯äº‘è½»é‡åº”ç”¨æœåŠ¡å™¨ |
| æœåŠ¡å™¨ IP | 111.231.107.149 |
| æ“ä½œç³»ç»Ÿ | OpenCloudOS 9 |
| ç®¡ç†é¢æ¿ | å®å¡” Linux é¢æ¿ |
| ä¸»åŸŸå | wyqaii.topï¼ˆå·²éƒ¨ç½²å…¶ä»–ç½‘ç«™ï¼Œä¸ºé»˜è®¤ç«™ç‚¹ï¼‰|
| å­åŸŸå | xianyu.wyqaii.topï¼ˆæœ¬é¡¹ç›®ï¼‰|
| DNS æœåŠ¡å•† | é˜¿é‡Œäº‘ |

> **æ³¨æ„**ï¼šæœåŠ¡å™¨ä¸Šå·²éƒ¨ç½² wyqaii.top ä½œä¸ºé»˜è®¤ç«™ç‚¹ï¼Œç”¨ IP ç›´æ¥è®¿é—®ä¼šæ˜¾ç¤ºè¯¥ç«™ç‚¹ã€‚å› æ­¤å¤‡æ¡ˆæœŸé—´æœ¬é¡¹ç›®éœ€ä½¿ç”¨ **8080 ç«¯å£** è®¿é—®ã€‚

### 8.2 éƒ¨ç½²æ¶æ„

```
ç”¨æˆ·æµè§ˆå™¨
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  è®¿é—®åœ°å€                                â”‚
â”‚  å¤‡æ¡ˆå‰: http://111.231.107.149:8080    â”‚  â† ä½¿ç”¨ 8080 ç«¯å£
â”‚  å¤‡æ¡ˆå: https://xianyu.wyqaii.top      â”‚  â† ä½¿ç”¨å­åŸŸå
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  è…¾è®¯äº‘è½»é‡æœåŠ¡å™¨                        â”‚
â”‚  111.231.107.149                        â”‚
â”‚  OpenCloudOS 9 + å®å¡”é¢æ¿               â”‚
â”‚                                         â”‚
â”‚  å·²æœ‰ç«™ç‚¹ï¼šwyqaii.top (ç«¯å£ 80, é»˜è®¤)    â”‚
â”‚                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  Nginx                           â”‚   â”‚
â”‚  â”‚  â”œâ”€ :80  â†’ wyqaii.top (å·²æœ‰)    â”‚   â”‚
â”‚  â”‚  â””â”€ :8080 â†’ é—²é±¼ä»£å†™åŠ©æ‰‹ (æ–°å¢)  â”‚   â”‚
â”‚  â”‚       â”œâ”€ /      â†’ å‰ç«¯é™æ€æ–‡ä»¶   â”‚   â”‚
â”‚  â”‚       â””â”€ /api/* â†’ FastAPI:8000  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚              â”‚                          â”‚
â”‚              â–¼                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  FastAPI (Pythoné¡¹ç›®ç®¡ç†å™¨)      â”‚   â”‚
â”‚  â”‚  ç«¯å£: 8000                      â”‚   â”‚
â”‚  â”‚  ç¯å¢ƒ: conda xianyu              â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚              â”‚                          â”‚
â”‚              â–¼                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  SQLite æ•°æ®åº“                   â”‚   â”‚
â”‚  â”‚  backend/data/xianyu.db         â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 8.3 éƒ¨ç½²æ–¹å¼ä¸€ï¼šIP + ç«¯å£éƒ¨ç½²ï¼ˆå¤‡æ¡ˆå®¡æ ¸æœŸé—´ï¼‰

> é€‚ç”¨äºåŸŸåå¤‡æ¡ˆå®¡æ ¸ä¸­ï¼ŒæœåŠ¡å™¨å·²æœ‰é»˜è®¤ç«™ç‚¹çš„æƒ…å†µã€‚ä½¿ç”¨ 8080 ç«¯å£é¿å…å†²çªã€‚

#### 8.3.1 æœåŠ¡å™¨ç¯å¢ƒå‡†å¤‡

```bash
# 1. SSH ç™»å½•æœåŠ¡å™¨
ssh root@111.231.107.149
# å¦‚æœ SSH è¢«å°ç¦ï¼Œä½¿ç”¨è…¾è®¯äº‘æ§åˆ¶å° VNC ç™»å½•

# 2. å®å¡”é¢æ¿å®‰è£… Python 3.11
# å®å¡”é¢æ¿ â†’ è½¯ä»¶å•†åº— â†’ æœç´¢ã€ŒPythoné¡¹ç›®ç®¡ç†å™¨ã€â†’ å®‰è£…
# Pythoné¡¹ç›®ç®¡ç†å™¨ â†’ ç‰ˆæœ¬ç®¡ç† â†’ å®‰è£… Python 3.11

# 3. å®‰è£…è¿›ç¨‹å®ˆæŠ¤ç®¡ç†å™¨ï¼ˆPythoné¡¹ç›®ç®¡ç†å™¨çš„ä¾èµ–ï¼‰
# å®å¡”é¢æ¿ â†’ è½¯ä»¶å•†åº— â†’ æœç´¢ã€Œè¿›ç¨‹å®ˆæŠ¤ç®¡ç†å™¨ã€â†’ å®‰è£…

# 4. Node.jsï¼ˆå¦‚æœªå®‰è£…ï¼‰
# å®å¡”é¢æ¿ â†’ è½¯ä»¶å•†åº— â†’ æœç´¢ã€ŒNode.jsç‰ˆæœ¬ç®¡ç†å™¨ã€â†’ å®‰è£…
# å®‰è£…å®Œæˆåé€‰æ‹© Node.js 18.x æˆ– 22.x ç‰ˆæœ¬
```

> **è¯´æ˜**ï¼šä½¿ç”¨å®å¡”çš„ Python ç‰ˆæœ¬ç®¡ç†ï¼Œæ— éœ€å®‰è£… Minicondaã€‚

#### 8.3.2 éƒ¨ç½²é¡¹ç›®ä»£ç 

```bash
# 1. åˆ›å»ºé¡¹ç›®ç›®å½•
mkdir -p /www/wwwroot/xianyu_answer
cd /www/wwwroot/xianyu_answer

# 2. å…‹éš†ä»£ç ï¼ˆä½¿ç”¨ HTTPSï¼Œæ— éœ€ SSH å¯†é’¥ï¼‰
git clone https://github.com/Wuaqi/xianyu_answer.git .
# å¦‚æœå¤±è´¥ï¼Œä½¿ç”¨é•œåƒï¼šgit clone https://ghproxy.com/https://github.com/Wuaqi/xianyu_answer.git .

# 3. æ„å»ºå‰ç«¯
cd frontend
npm install
npm run build
```

> **æ³¨æ„**ï¼šåç«¯ä¾èµ–ç”±å®å¡” Python é¡¹ç›®ç®¡ç†å™¨è‡ªåŠ¨å®‰è£…ï¼Œæ— éœ€æ‰‹åŠ¨æ‰§è¡Œ pip installã€‚

#### 8.3.3 å®å¡”é¢æ¿é…ç½®

**æ­¥éª¤ 1ï¼šæ·»åŠ ç½‘ç«™**

1. å®å¡”é¢æ¿ â†’ **ç½‘ç«™** â†’ **æ·»åŠ ç«™ç‚¹**
2. é…ç½®é¡¹ï¼š
   - åŸŸåï¼š`111.231.107.149`ï¼ˆä¸å¸¦ç«¯å£ï¼Œåé¢æ”¹ Nginx é…ç½®ï¼‰
   - æ ¹ç›®å½•ï¼š`/www/wwwroot/xianyu_answer/frontend/dist`
   - PHPç‰ˆæœ¬ï¼š**çº¯é™æ€**
   - æ•°æ®åº“ï¼šä¸åˆ›å»º

**æ­¥éª¤ 2ï¼šé…ç½®åç«¯æœåŠ¡**

> æ¨èä½¿ç”¨ã€Œè¿›ç¨‹å®ˆæŠ¤ç®¡ç†å™¨ã€ï¼Œæ›´ç¨³å®šã€‚

1. å®å¡”é¢æ¿ â†’ **è¿›ç¨‹å®ˆæŠ¤ç®¡ç†å™¨** â†’ **æ·»åŠ å®ˆæŠ¤è¿›ç¨‹**
2. é…ç½®é¡¹ï¼š

| é…ç½®é¡¹ | å€¼ |
|--------|-----|
| åç§° | xianyu_answer |
| å¯åŠ¨å‘½ä»¤ | /www/wwwroot/xianyu_answer/backend/*_venv/bin/python3 run.py |
| è¿è¡Œç›®å½• | /www/wwwroot/xianyu_answer/backend |
| è¿›ç¨‹æ•°é‡ | 1 |
| å¯åŠ¨ç”¨æˆ· | root |

> **è¯´æ˜**ï¼š`*_venv` æ˜¯å®å¡”è‡ªåŠ¨åˆ›å»ºçš„è™šæ‹Ÿç¯å¢ƒç›®å½•ï¼Œåç§°ç±»ä¼¼ `85f635ebc95f2e1f72b514724dcf52ca_venv`ï¼Œè¯·æ ¹æ®å®é™…ç›®å½•åä¿®æ”¹ã€‚
>
> å¦‚æœè™šæ‹Ÿç¯å¢ƒä¸å­˜åœ¨ï¼Œå…ˆé€šè¿‡ Python é¡¹ç›®ç®¡ç†å™¨æ·»åŠ é¡¹ç›®ï¼ˆä¼šè‡ªåŠ¨åˆ›å»ºè™šæ‹Ÿç¯å¢ƒå¹¶å®‰è£…ä¾èµ–ï¼‰ï¼Œç„¶ååˆ é™¤é¡¹ç›®ï¼Œæ”¹ç”¨è¿›ç¨‹å®ˆæŠ¤ç®¡ç†å™¨ã€‚

**æ­¥éª¤ 3ï¼šé…ç½® Nginx**

1. å®å¡”é¢æ¿ â†’ **ç½‘ç«™** â†’ ç‚¹å‡» `111.231.107.149` â†’ **è®¾ç½®**
2. ç‚¹å‡»å·¦ä¾§ **é…ç½®æ–‡ä»¶**
3. ä¿®æ”¹ `listen 80` ä¸º `listen 8080`ï¼Œå®Œæ•´é…ç½®å¦‚ä¸‹ï¼š

```nginx
server {
    listen 8080;  # ä½¿ç”¨ 8080 ç«¯å£ï¼Œé¿å…ä¸é»˜è®¤ç«™ç‚¹å†²çª
    listen [::]:8080;
    server_name 111.231.107.149;

    # å‰ç«¯é™æ€æ–‡ä»¶ç›®å½•
    root /www/wwwroot/xianyu_answer/frontend/dist;
    index index.html;

    # API åå‘ä»£ç†åˆ° FastAPI
    location /api/ {
        proxy_pass http://127.0.0.1:8000/api/;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
        proxy_connect_timeout 60s;
        proxy_read_timeout 120s;  # LLM è¯·æ±‚å¯èƒ½è¾ƒæ…¢
        proxy_send_timeout 60s;
    }

    # å‰ç«¯ SPA è·¯ç”±æ”¯æŒ
    location / {
        try_files $uri $uri/ /index.html;
    }

    # æ—¥å¿—
    access_log /www/wwwlogs/xianyu_answer.log;
    error_log /www/wwwlogs/xianyu_answer.error.log;
}
```

4. ç‚¹å‡» **ä¿å­˜** â†’ é‡è½½ Nginx

**æ­¥éª¤ 4ï¼šå¼€æ”¾é˜²ç«å¢™ç«¯å£ï¼ˆé‡è¦ï¼ï¼‰**

**ä¸¤å±‚é˜²ç«å¢™éƒ½è¦å¼€æ”¾**ï¼š

1. **å®å¡”é˜²ç«å¢™**ï¼šå®å¡”é¢æ¿ â†’ **å®‰å…¨** â†’ **é˜²ç«å¢™** â†’ æ·»åŠ ç«¯å£ `8080`
2. **è…¾è®¯äº‘é˜²ç«å¢™**ï¼šè…¾è®¯äº‘æ§åˆ¶å° â†’ **è½»é‡åº”ç”¨æœåŠ¡å™¨** â†’ é€‰æ‹©æœåŠ¡å™¨ â†’ **é˜²ç«å¢™**ï¼ˆé¡µé¢ä¸Šæ–¹æ ‡ç­¾ï¼‰â†’ æ·»åŠ è§„åˆ™ï¼š
   - åè®®ï¼šTCP
   - ç«¯å£ï¼š8080
   - æ¥æºï¼šå…¨éƒ¨IPv4åœ°å€
   - ç­–ç•¥ï¼šå…è®¸

**æ­¥éª¤ 5ï¼šéªŒè¯éƒ¨ç½²**

1. æµè§ˆå™¨è®¿é—®ï¼š`http://111.231.107.149:8080`
2. æ£€æŸ¥é¡µé¢æ˜¯å¦æ­£å¸¸åŠ è½½
3. ç‚¹å‡»è®¾ç½®ï¼Œé…ç½®å¤§æ¨¡å‹ API
4. æµ‹è¯•æ¶ˆæ¯åˆ†æåŠŸèƒ½

> å¦‚æœæ— æ³•è®¿é—®ï¼Œå‚è€ƒ 8.7.3 è®¿é—®é—®é¢˜æ’æŸ¥ã€‚

### 8.4 éƒ¨ç½²æ–¹å¼äºŒï¼šåŸŸåéƒ¨ç½²ï¼ˆå¤‡æ¡ˆé€šè¿‡åï¼‰

> é€‚ç”¨äºåŸŸåå¤‡æ¡ˆå·²é€šè¿‡ï¼Œå¯ä»¥æ­£å¸¸ä½¿ç”¨åŸŸåè®¿é—®çš„æƒ…å†µã€‚

#### 8.4.1 DNS é…ç½®

åœ¨é˜¿é‡Œäº‘ DNS æ§åˆ¶å°æ·»åŠ è§£æè®°å½•ï¼š

| è®°å½•ç±»å‹ | ä¸»æœºè®°å½• | è®°å½•å€¼ | TTL |
|----------|----------|--------|-----|
| A | xianyu | 111.231.107.149 | 10åˆ†é’Ÿ |

ç­‰å¾… DNS ç”Ÿæ•ˆï¼ˆé€šå¸¸ 1-10 åˆ†é’Ÿï¼‰ã€‚

#### 8.4.2 é¡¹ç›®éƒ¨ç½²

ä¸ IP éƒ¨ç½²ç›¸åŒï¼Œå‚è€ƒ 8.3.2 å’Œ 8.3.3 æ­¥éª¤ï¼Œä½†éœ€ä¿®æ”¹ï¼š

**æ·»åŠ ç½‘ç«™æ—¶**ï¼šåŸŸåå¡«å†™ `xianyu.wyqaii.top`

**Nginx é…ç½®**ï¼š

```nginx
server {
    listen 80;
    server_name xianyu.wyqaii.top;

    root /www/wwwroot/xianyu_answer/frontend/dist;
    index index.html;

    location /api/ {
        proxy_pass http://127.0.0.1:8000/api/;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
        proxy_connect_timeout 60s;
        proxy_read_timeout 120s;
        proxy_send_timeout 60s;
    }

    location / {
        try_files $uri $uri/ /index.html;
    }

    access_log /www/wwwlogs/xianyu.wyqaii.top.log;
    error_log /www/wwwlogs/xianyu.wyqaii.top.error.log;
}
```

#### 8.4.3 é…ç½® SSL è¯ä¹¦ï¼ˆå…è´¹ï¼‰

1. å®å¡”é¢æ¿ â†’ **ç½‘ç«™** â†’ ç‚¹å‡» `xianyu.wyqaii.top` â†’ **è®¾ç½®**
2. ç‚¹å‡»å·¦ä¾§ **SSL**
3. é€‰æ‹© **Let's Encrypt**ï¼ˆå…è´¹ï¼‰
4. å‹¾é€‰åŸŸå `xianyu.wyqaii.top`
5. ç‚¹å‡» **ç”³è¯·**
6. ç”³è¯·æˆåŠŸåï¼Œå¼€å¯ **å¼ºåˆ¶HTTPS**

> **æ³¨æ„**ï¼šSSL è¯ä¹¦éœ€è¦åŸŸåï¼Œçº¯ IP æ— æ³•ç”³è¯· SSL è¯ä¹¦ã€‚

### 8.5 ä» 8080 ç«¯å£è¿ç§»åˆ°åŸŸåéƒ¨ç½²

å½“åŸŸåå¤‡æ¡ˆé€šè¿‡åï¼ŒæŒ‰ä»¥ä¸‹æ­¥éª¤è¿ç§»ï¼ˆçº¦ 5 åˆ†é’Ÿï¼‰ï¼š

#### æ­¥éª¤ 1ï¼šæ·»åŠ  DNS è§£æ

åœ¨é˜¿é‡Œäº‘ DNS æ§åˆ¶å°æ·»åŠ  A è®°å½•ï¼š
- ä¸»æœºè®°å½•ï¼š`xianyu`
- è®°å½•å€¼ï¼š`111.231.107.149`

ç­‰å¾… 1-10 åˆ†é’Ÿç”Ÿæ•ˆã€‚

#### æ­¥éª¤ 2ï¼šä¿®æ”¹å®å¡”ç½‘ç«™é…ç½®

1. å®å¡”é¢æ¿ â†’ **ç½‘ç«™** â†’ ç‚¹å‡» `111.231.107.149` â†’ **è®¾ç½®**
2. ç‚¹å‡»å·¦ä¾§ **åŸŸåç®¡ç†**
3. æ·»åŠ åŸŸåï¼š`xianyu.wyqaii.top`
4. åˆ é™¤åŸŸåï¼š`111.231.107.149:8080`

#### æ­¥éª¤ 3ï¼šæ›´æ–° Nginx é…ç½®

ä¿®æ”¹ç›‘å¬ç«¯å£å’ŒåŸŸåï¼š

```nginx
server {
    listen 80;  # æ”¹å› 80 ç«¯å£
    server_name xianyu.wyqaii.top;  # æ”¹æˆåŸŸå

    # å…¶ä»–é…ç½®ä¿æŒä¸å˜
    root /www/wwwroot/xianyu_answer/frontend/dist;
    index index.html;

    location /api/ {
        proxy_pass http://127.0.0.1:8000/api/;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
        proxy_connect_timeout 60s;
        proxy_read_timeout 120s;
        proxy_send_timeout 60s;
    }

    location / {
        try_files $uri $uri/ /index.html;
    }

    access_log /www/wwwlogs/xianyu.wyqaii.top.log;
    error_log /www/wwwlogs/xianyu.wyqaii.top.error.log;
}
```

#### æ­¥éª¤ 4ï¼šç”³è¯· SSL è¯ä¹¦

å‚è€ƒ 8.4.3 é…ç½®å…è´¹çš„ Let's Encrypt è¯ä¹¦ã€‚

#### æ­¥éª¤ 5ï¼šæ¸…ç†é˜²ç«å¢™ï¼ˆå¯é€‰ï¼‰

å¦‚æœä¸å†éœ€è¦ 8080 ç«¯å£ï¼Œå¯ä»¥å…³é—­ï¼š
1. å®å¡”é¢æ¿ â†’ **å®‰å…¨** â†’ åˆ é™¤ 8080 ç«¯å£
2. è…¾è®¯äº‘æ§åˆ¶å° â†’ é˜²ç«å¢™ â†’ åˆ é™¤ 8080 è§„åˆ™

#### æ­¥éª¤ 6ï¼šéªŒè¯

1. è®¿é—® `https://xianyu.wyqaii.top`
2. ç¡®è®¤ HTTPS æ­£å¸¸å·¥ä½œ
3. ç¡®è®¤åŸç½‘ç«™ `wyqaii.top` ä¸å—å½±å“
4. æµ‹è¯•æ‰€æœ‰åŠŸèƒ½

### 8.6 é¡¹ç›®æ›´æ–°æµç¨‹

å½“æœ¬åœ°å¼€å‘å®Œæˆæ–°åŠŸèƒ½å¹¶æ¨é€åˆ° GitHub åï¼Œåœ¨æœåŠ¡å™¨æ‰§è¡Œä»¥ä¸‹æ­¥éª¤æ›´æ–°ï¼š

#### 8.6.1 æ–¹å¼ä¸€ï¼šGit æ‹‰å–ï¼ˆéœ€è¦ç½‘ç»œé€šç•…ï¼‰

```bash
# SSH ç™»å½•æœåŠ¡å™¨
ssh root@111.231.107.149

# è¿›å…¥é¡¹ç›®ç›®å½•
cd /www/wwwroot/xianyu_answer

# æ‰§è¡Œæ›´æ–°è„šæœ¬
./update.sh

# æˆ–æ‰‹åŠ¨æ‰§è¡Œ
git pull origin main
cd frontend && npm install && npm run build
```

> å¦‚æœ GitHub è®¿é—®æ…¢ï¼Œå¯ä½¿ç”¨é•œåƒï¼š`git clone https://ghproxy.com/https://github.com/Wuaqi/xianyu_answer.git`

#### 8.6.2 æ–¹å¼äºŒï¼šæ‰‹åŠ¨æ‰“åŒ…ä¸Šä¼ ï¼ˆæ¨èï¼Œé€‚åˆå›½å†…æœåŠ¡å™¨ï¼‰

**æ­¥éª¤ 1ï¼šæœ¬åœ°æ‰“åŒ…**

```bash
# è¿›å…¥é¡¹ç›®ç›®å½•
cd /Users/wyq/Developer/xianyu_answer

# æ‰“åŒ…é¡¹ç›®ï¼ˆæ’é™¤ node_modulesã€.gitã€æ•°æ®åº“ã€è™šæ‹Ÿç¯å¢ƒï¼‰
tar --exclude='node_modules' --exclude='.git' --exclude='backend/data/xianyu.db' --exclude='backend/venv' --exclude='__pycache__' --exclude='.DS_Store' -czvf ../xianyu_answer.tar.gz .

# ä¸Šä¼ å‹ç¼©åŒ…
scp ../xianyu_answer.tar.gz root@111.231.107.149:/www/wwwroot/
```

**æ­¥éª¤ 2ï¼šæœåŠ¡å™¨éƒ¨ç½²**

```bash
# SSH ç™»å½•æœåŠ¡å™¨
ssh root@111.231.107.149

cd /www/wwwroot

# å¤‡ä»½æ•°æ®åº“å’Œè™šæ‹Ÿç¯å¢ƒï¼ˆé‡è¦ï¼ï¼‰
cp xianyu_answer/backend/data/xianyu.db ~/xianyu.db.backup
mv xianyu_answer/backend/venv ~/venv.backup

# åˆ é™¤æ—§ç›®å½•ï¼Œè§£å‹æ–°æ–‡ä»¶
rm -rf xianyu_answer
mkdir xianyu_answer
tar -xzvf xianyu_answer.tar.gz -C xianyu_answer

# æ¢å¤æ•°æ®åº“å’Œè™šæ‹Ÿç¯å¢ƒ
cp ~/xianyu.db.backup xianyu_answer/backend/data/xianyu.db
mv ~/venv.backup xianyu_answer/backend/venv

# æ„å»ºå‰ç«¯ï¼ˆå…ˆåˆ é™¤ dist é¿å… .user.ini å†²çªï¼‰
cd xianyu_answer/frontend
rm -rf dist
npm install
npm run build

# æ¸…ç†å‹ç¼©åŒ…
rm /www/wwwroot/xianyu_answer.tar.gz
```

**æ­¥éª¤ 3ï¼šé‡å¯æœåŠ¡**

åœ¨å®å¡”é¢æ¿ã€Œè¿›ç¨‹å®ˆæŠ¤ç®¡ç†å™¨ã€ç‚¹å‡» `xianyu_answer` çš„ã€Œé‡å¯ã€æŒ‰é’®ã€‚

**æ­¥éª¤ 4ï¼šå¦‚æœæœ‰æ–°å¢ä¾èµ–**

å½“ `requirements.txt` æœ‰å˜æ›´æ—¶ï¼Œéœ€é¢å¤–æ‰§è¡Œï¼š
```bash
cd /www/wwwroot/xianyu_answer/backend
./venv/bin/pip install -r requirements.txt
```

#### 8.6.3 ä¸€é”®éƒ¨ç½²è„šæœ¬ï¼ˆæ¨èï¼‰

é¡¹ç›®åŒ…å«æœ¬åœ°éƒ¨ç½²è„šæœ¬ `deploy.sh`ï¼Œå¯è‡ªåŠ¨å®Œæˆæ‰“åŒ…ã€ä¸Šä¼ ã€éƒ¨ç½²ï¼š

```bash
cd /Users/wyq/Developer/xianyu_answer
./deploy.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š
1. æ‰“åŒ…é¡¹ç›®ï¼ˆæ’é™¤ node_modulesã€.gitã€æ•°æ®åº“ã€è™šæ‹Ÿç¯å¢ƒï¼‰
2. ä¸Šä¼ åˆ°æœåŠ¡å™¨
3. å¤‡ä»½å¹¶æ¢å¤æ•°æ®åº“å’Œè™šæ‹Ÿç¯å¢ƒ
4. æ„å»ºå‰ç«¯
5. æ¸…ç†æœ¬åœ°å’ŒæœåŠ¡å™¨çš„å‹ç¼©åŒ…

å®Œæˆååªéœ€åœ¨å®å¡”é¢æ¿ã€Œè¿›ç¨‹å®ˆæŠ¤ç®¡ç†å™¨ã€é‡å¯ `xianyu_answer` å³å¯ã€‚

#### 8.6.4 é…ç½® SSH å…å¯†ç™»å½•ï¼ˆå¯é€‰ï¼‰

é…ç½®åè¿è¡Œéƒ¨ç½²è„šæœ¬æ— éœ€è¾“å…¥å¯†ç ï¼š

```bash
# 1. æ£€æŸ¥æ˜¯å¦å·²æœ‰å¯†é’¥
ls ~/.ssh/id_ed25519.pub || ls ~/.ssh/id_rsa.pub

# å¦‚æœæ²¡æœ‰å¯†é’¥ï¼Œç”Ÿæˆæ–°çš„ï¼š
ssh-keygen -t ed25519
# ä¸€è·¯å›è½¦å³å¯

# 2. ä¸Šä¼ å…¬é’¥åˆ°æœåŠ¡å™¨ï¼ˆéœ€è¾“å…¥ä¸€æ¬¡æœåŠ¡å™¨å¯†ç ï¼‰
ssh-copy-id -i ~/.ssh/id_ed25519.pub root@111.231.107.149

# 3. æµ‹è¯•å…å¯†ç™»å½•
ssh root@111.231.107.149
# ç›´æ¥ç™»å½•æˆåŠŸåˆ™é…ç½®å®Œæˆ
```

å¯†é’¥å­˜å‚¨ä½ç½®ï¼š
- æœ¬åœ°ç§é’¥ï¼š`~/.ssh/id_ed25519`ï¼ˆç»å¯¹ä¸èƒ½æ³„éœ²ï¼‰
- æœ¬åœ°å…¬é’¥ï¼š`~/.ssh/id_ed25519.pub`
- æœåŠ¡å™¨ï¼š`~/.ssh/authorized_keys`ï¼ˆå­˜æ”¾å…¬é’¥ï¼‰

### 8.7 å¸¸è§é—®é¢˜æ’æŸ¥

#### 8.7.1 éƒ¨ç½²é˜¶æ®µé—®é¢˜

| é—®é¢˜ | åŸå›  | è§£å†³æ–¹æ³• |
|------|------|----------|
| **Conda æœåŠ¡æ¡æ¬¾é”™è¯¯** | Anaconda éœ€è¦æ¥å— ToS | æ‰§è¡Œ `conda tos accept --override-channels --channel https://repo.anaconda.com/pkgs/main` |
| **conda activate å¤±è´¥** | conda æœªåˆå§‹åŒ– | æ‰§è¡Œ `conda init bash && source ~/.bashrc` |
| **GitHub å…‹éš†å¤±è´¥** | ç½‘ç»œé—®é¢˜ | ä½¿ç”¨é•œåƒ `git clone https://ghproxy.com/https://github.com/...` æˆ–æ‰‹åŠ¨ä¸Šä¼  |
| **SSH è¿æ¥è¢«é‡ç½®** | å°è¯•æ¬¡æ•°è¿‡å¤šè¢«å°ç¦ | ç­‰å¾…å‡ åˆ†é’Ÿï¼Œæˆ–é€šè¿‡è…¾è®¯äº‘æ§åˆ¶å° VNC ç™»å½• |
| **å®å¡”æ—  FastAPI æ¡†æ¶é€‰é¡¹** | æ­£å¸¸ç°è±¡ | æ¡†æ¶é€‰æ‹© `python`ï¼Œå¯åŠ¨æ–¹å¼é€‰æ‹© `python` |
| **è¿›ç¨‹å®ˆæŠ¤æ’ä»¶æœªå®‰è£…** | ä¾èµ–ç¼ºå¤± | å®å¡”è½¯ä»¶å•†åº—å®‰è£…ã€Œè¿›ç¨‹å®ˆæŠ¤ç®¡ç†å™¨ã€ |
| **Python é¡¹ç›®æ·»åŠ å¤±è´¥** | å®å¡”å…¼å®¹é—®é¢˜ | æ”¹ç”¨ã€Œè¿›ç¨‹å®ˆæŠ¤ç®¡ç†å™¨ã€ç›´æ¥æ·»åŠ å®ˆæŠ¤è¿›ç¨‹ |
| **è™šæ‹Ÿç¯å¢ƒæ—  python å‘½ä»¤** | åªæœ‰ python3 | ä½¿ç”¨ `python3` è€Œä¸æ˜¯ `python` è¿è¡Œ |
| **æ·»åŠ ç«™ç‚¹ç«¯å£èŒƒå›´ä¸åˆæ³•** | åŸŸåå­—æ®µä¸èƒ½å¸¦ç«¯å£ | å…ˆç”¨ IP æ·»åŠ ï¼Œå†ä¿®æ”¹ Nginx é…ç½®æ”¹ç«¯å£ |

#### 8.7.2 è¿è¡Œé˜¶æ®µé—®é¢˜

| é—®é¢˜ | å¯èƒ½åŸå›  | è§£å†³æ–¹æ³• |
|------|----------|----------|
| é¡µé¢ç™½å±/404 | Nginx æ ¹ç›®å½•é…ç½®é”™è¯¯ | æ£€æŸ¥ root æ˜¯å¦æŒ‡å‘ `frontend/dist` |
| API è¿”å› 404 | Python é¡¹ç›®æœªå¯åŠ¨ | å®å¡”é¢æ¿æ£€æŸ¥è¿›ç¨‹å®ˆæŠ¤ç®¡ç†å™¨çŠ¶æ€ |
| API è¿”å› 502 | FastAPI å´©æºƒ | æŸ¥çœ‹é¡¹ç›®æ—¥å¿—ï¼Œé‡å¯æœåŠ¡ |
| API è¯·æ±‚è¶…æ—¶ | LLM API å“åº”æ…¢ | å¢åŠ  `proxy_read_timeout` å€¼ |
| å‰ç«¯è·¯ç”± 404 | Nginx æœªé…ç½® SPA æ”¯æŒ | æ·»åŠ  `try_files $uri $uri/ /index.html` |
| SSL è¯ä¹¦ç”³è¯·å¤±è´¥ | åŸŸåæœªè§£æ/å¤‡æ¡ˆæœªé€šè¿‡ | ç¡®è®¤ DNS ç”Ÿæ•ˆä¸”å¤‡æ¡ˆå·²å®Œæˆ |

#### 8.7.3 è®¿é—®é—®é¢˜ï¼ˆé‡è¦ï¼‰

| é—®é¢˜ | åŸå›  | è§£å†³æ–¹æ³• |
|------|------|----------|
| **å¤–éƒ¨æ— æ³•è®¿é—® 8080 ç«¯å£** | è…¾è®¯äº‘é˜²ç«å¢™æœªå¼€æ”¾ | åœ¨æœåŠ¡å™¨**è¯¦æƒ…é¡µä¸Šæ–¹**çš„ã€Œé˜²ç«å¢™ã€é¢æ¿æ·»åŠ è§„åˆ™ï¼ˆä¸æ˜¯å®å¡”é˜²ç«å¢™ï¼‰ |
| é˜²ç«å¢™è§„åˆ™å·²æ·»åŠ ä½†ä»æ— æ³•è®¿é—® | è§„åˆ™æœªç”Ÿæ•ˆ | åˆ é™¤è§„åˆ™ï¼Œç­‰å¾… 10 ç§’ï¼Œé‡æ–°æ·»åŠ  |
| æœåŠ¡å™¨å†…éƒ¨èƒ½è®¿é—®ï¼Œå¤–éƒ¨ä¸è¡Œ | äº‘é˜²ç«å¢™é—®é¢˜ | ç”¨ `tcpdump -i eth0 port 8080` ç›‘å¬ç¡®è®¤è¯·æ±‚æ˜¯å¦åˆ°è¾¾ |

> **æ³¨æ„**ï¼šè…¾è®¯äº‘è½»é‡æœåŠ¡å™¨æœ‰**ä¸¤å±‚é˜²ç«å¢™**ï¼š
> 1. **äº‘é˜²ç«å¢™**ï¼šè…¾è®¯äº‘æ§åˆ¶å° â†’ æœåŠ¡å™¨è¯¦æƒ…é¡µ â†’ ä¸Šæ–¹ã€Œé˜²ç«å¢™ã€æ ‡ç­¾ï¼ˆå¿…é¡»é…ç½®ï¼‰
> 2. **ç³»ç»Ÿé˜²ç«å¢™**ï¼šå®å¡”é¢æ¿ â†’ å®‰å…¨ â†’ é˜²ç«å¢™ï¼ˆä¹Ÿéœ€è¦é…ç½®ï¼‰
>
> ä¸¤å±‚éƒ½è¦å¼€æ”¾ç«¯å£æ‰èƒ½è®¿é—®ï¼

**æŸ¥çœ‹æ—¥å¿—å‘½ä»¤ï¼š**

```bash
# Nginx è®¿é—®æ—¥å¿—
tail -f /www/wwwlogs/xianyu_answer.log

# Nginx é”™è¯¯æ—¥å¿—
tail -f /www/wwwlogs/xianyu_answer.error.log

# è¿›ç¨‹å®ˆæŠ¤ç®¡ç†å™¨æ—¥å¿—
# å®å¡”é¢æ¿ â†’ è¿›ç¨‹å®ˆæŠ¤ç®¡ç†å™¨ â†’ ç‚¹å‡»é¡¹ç›® â†’ æ—¥å¿—

# æµ‹è¯•ç«¯å£æ˜¯å¦è¢«å¤–éƒ¨è®¿é—®
tcpdump -i eth0 port 8080 -n
```

### 8.8 SSL è¯ä¹¦è¯´æ˜

| è¯ä¹¦ç±»å‹ | ä»·æ ¼ | æœ‰æ•ˆæœŸ | è¯´æ˜ |
|----------|------|--------|------|
| Let's Encrypt | å…è´¹ | 90å¤©ï¼ˆè‡ªåŠ¨ç»­æœŸï¼‰ | æ¨èï¼Œå®å¡”é¢æ¿å†…ç½®æ”¯æŒ |
| é˜¿é‡Œäº‘å…è´¹è¯ä¹¦ | å…è´¹ | 1å¹´ | éœ€æ‰‹åŠ¨ç”³è¯·å’Œéƒ¨ç½² |
| å•†ä¸šè¯ä¹¦ | ä»˜è´¹ | 1-2å¹´ | ä¼ä¸šçº§ï¼Œæœ‰ä¿é™©èµ”ä»˜ |

> **æ¨è**ï¼šä½¿ç”¨ Let's Encrypt å…è´¹è¯ä¹¦ï¼Œå®å¡”é¢æ¿ä¼šè‡ªåŠ¨ç»­æœŸï¼Œæ— éœ€æ‰‹åŠ¨æ“ä½œã€‚

---

## ä¹ã€éªŒæ”¶æ ‡å‡†

### V1 MVP å®Œæˆæ ‡å‡† - å·²é€šè¿‡

- [x] å¯é…ç½®å¤§æ¨¡å‹APIï¼ˆBase URL / API Key / æ¨¡å‹IDï¼‰
- [x] å¯ç²˜è´´ä¹°å®¶æ¶ˆæ¯å¹¶åˆ†æ
- [x] æ­£ç¡®è¯†åˆ«24ç§æœåŠ¡ç±»å‹
- [x] ç”Ÿæˆäº²åˆ‡å‹å¥½ä¸“ä¸šçš„å›å¤
- [x] è‡ªåŠ¨è¿½é—®ç¼ºå¤±çš„å…³é”®ä¿¡æ¯
- [x] æ˜¾ç¤ºæŠ¥ä»·åŒºé—´åŠè®¡ç®—ä¾æ®
- [x] å›å¤å†…å®¹å¯ä¸€é”®å¤åˆ¶
- [x] å¯æŸ¥çœ‹å®Œæ•´ä»·ç›®è¡¨
- [x] æç¤ºè¯å¯è‡ªå®šä¹‰ç¼–è¾‘

### V2 å®Œæˆæ ‡å‡† - å·²é€šè¿‡

- [x] æ¯æ¬¡åˆ†æè‡ªåŠ¨ä¿å­˜å†å²è®°å½•
- [x] é¡¶éƒ¨æ ‡ç­¾é¡µåˆ‡æ¢æ¶ˆæ¯åˆ†æ/å†å²è®°å½•
- [x] å†å²è®°å½•æ”¯æŒæœç´¢å’Œç­›é€‰
- [x] å¯æ ‡è®°æˆäº¤çŠ¶æ€å’Œæ–‡ç« ç±»å‹
- [x] å›å¤æ¨¡æ¿åº“é¢„è®¾å¸¸ç”¨è¯æœ¯
- [x] æ¨¡æ¿æ”¯æŒå¢åˆ æ”¹å’Œä¸€é”®æ’å…¥
- [x] ç”Ÿæˆçš„å›å¤æ”¯æŒç¼–è¾‘

### V3 å®Œæˆæ ‡å‡† - å·²é€šè¿‡

- [x] è¿”å›å¤šä¸ªå¯é€‰å›å¤ï¼ˆ3-5ä¸ªï¼‰ï¼Œæ¯ä¸ªæœ‰ç‹¬ç«‹å¤åˆ¶æŒ‰é’®
- [x] æ”¯æŒå¤šè½®å¯¹è¯ï¼Œä¿æŒä¸Šä¸‹æ–‡è¿ç»­æ€§
- [x] ä¼šè¯çŠ¶æ€ç®¡ç†ï¼ˆè¿›è¡Œä¸­/å·²ç»“æŸï¼‰
- [x] ä¿¡æ¯è¶³å¤Ÿæ—¶è‡ªåŠ¨æç¤º"å¯ä»¥æŠ¥ä»·"
- [x] ä¼šè¯ç»“æŸæ—¶å¯æ ‡è®°æˆäº¤çŠ¶æ€ã€ä»·æ ¼ã€æ–‡ç« ç±»å‹
- [x] æˆäº¤æ—¶è‡ªåŠ¨æç‚¼éœ€æ±‚è¦ç‚¹
- [x] æœªæˆäº¤æ—¶æ˜¾ç¤ºå¯é…ç½®çš„æŒ½ç•™è¯æœ¯
- [x] å¿«æ·å›å¤æ ‡ç­¾ç‚¹å‡»å³æ’å…¥
- [x] å†å²è®°å½•æ”¯æŒåˆ é™¤æ“ä½œ
- [x] ç»Ÿä¸€æç¤ºè¯ç®¡ç†ï¼ˆ4ä¸ªæ¨¡æ¿ï¼‰

---

## åä¸€ã€V3 è¯¦ç»†è®¾è®¡

### 11.1 å¯¹è¯ä¼šè¯æ•°æ®æ¨¡å‹

```typescript
// ä¼šè¯çŠ¶æ€
type SessionStatus = 'active' | 'closed';

// æˆäº¤çŠ¶æ€
type DealStatus = 'pending' | 'success' | 'failed';

// ä¼šè¯
interface Session {
  id: number;
  status: SessionStatus;           // ä¼šè¯çŠ¶æ€
  dealStatus: DealStatus;          // æˆäº¤çŠ¶æ€
  dealPrice?: number;              // æˆäº¤ä»·æ ¼
  articleType?: string;            // æ–‡ç« ç±»å‹
  requirementSummary?: string;     // éœ€æ±‚è¦ç‚¹æ‘˜è¦ï¼ˆæˆäº¤æ—¶è‡ªåŠ¨ç”Ÿæˆï¼‰
  createdAt: Date;
  updatedAt: Date;
}

// éœ€æ±‚è¦ç‚¹ï¼ˆæˆäº¤æ—¶æç‚¼ï¼‰
interface RequirementSummary {
  articleType: string;             // æ–‡ç« ç±»å‹
  wordCount?: number;              // å­—æ•°è¦æ±‚
  deadline?: string;               // æˆªæ­¢æ—¶é—´
  topic?: string;                  // ä¸»é¢˜/é¢˜ç›®
  requirements: string[];          // å…·ä½“è¦æ±‚åˆ—è¡¨
  notes?: string;                  // å…¶ä»–å¤‡æ³¨
}

// å¯¹è¯æ¶ˆæ¯
interface Message {
  id: number;
  sessionId: number;               // æ‰€å±ä¼šè¯
  role: 'buyer' | 'seller';        // ä¹°å®¶æ¶ˆæ¯ or å–å®¶å›å¤
  content: string;                 // æ¶ˆæ¯å†…å®¹
  createdAt: Date;
}

// AI åˆ†æç»“æœï¼ˆæ¯æ¬¡ä¹°å®¶æ¶ˆæ¯åç”Ÿæˆï¼‰
interface AIAnalysis {
  id: number;
  sessionId: number;
  messageId: number;               // å¯¹åº”çš„ä¹°å®¶æ¶ˆæ¯
  suggestedReplies: string[];      // æ¨èå›å¤æ¸…å•ï¼ˆ3-5ä¸ªï¼‰
  extractedInfo: ExtractedInfo;    // å·²æå–çš„ä¿¡æ¯ï¼ˆç´¯ç§¯ï¼‰
  missingInfo: string[];           // ä»ç¼ºå¤±çš„ä¿¡æ¯
  canQuote: boolean;               // æ˜¯å¦å¯ä»¥æŠ¥ä»·
  priceEstimate?: PriceEstimate;   // æŠ¥ä»·ï¼ˆä»…å½“ canQuote=trueï¼‰
  quickTags: string[];             // å¿«æ·å›å¤æ ‡ç­¾
}
```

### 11.2 UI åŸå‹è®¾è®¡

#### å¯¹è¯åŠ©æ‰‹ä¸»ç•Œé¢

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  é—²é±¼ä»£å†™åŠ©æ‰‹                                   [æç¤ºè¯] [è®¾ç½®]  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [æ¶ˆæ¯åˆ†æ]  [è¿›è¡Œä¸­ä¼šè¯]  [å†å²è®°å½•]                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ ğŸ’¬ å¯¹è¯è®°å½•                               [ç»“æŸä¼šè¯ â–¼]   â”‚   â”‚
â”‚  â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚   â”‚
â”‚  â”‚ ğŸ‘¤ ä¹°å®¶: ä½ èƒ½å†™æœ«æ—¥å®‰å…¨å±‹ç±»å‹çš„çŸ­ç¯‡å°è¯´å—                â”‚   â”‚
â”‚  â”‚ ğŸ¤– ä½ : æ‚¨å¥½å‘€ï½æœ«æ—¥é¢˜æçš„çŸ­ç¯‡å°è¯´å®Œå…¨å¯ä»¥å†™çš„...        â”‚   â”‚
â”‚  â”‚ ğŸ‘¤ ä¹°å®¶: å¤§æ¦‚éœ€è¦5000å­—ï¼Œä¸‹å‘¨äº”ä¹‹å‰è¦                   â”‚   â”‚
â”‚  â”‚ ...                                                     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ ğŸ“ ç²˜è´´ä¹°å®¶æ–°æ¶ˆæ¯                                        â”‚   â”‚
â”‚  â”‚ _                                                        â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                    [ å‘é€å¹¶åˆ†æ ]                               â”‚
â”‚                                                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ“Š å½“å‰çŠ¶æ€                                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ ç±»å‹: çŸ­ç¯‡å°è¯´   â”‚ â”‚ å­—æ•°: 5000å­—     â”‚ â”‚ æˆªæ­¢: ä¸‹å‘¨äº”    â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚  âš ï¸ ä»éœ€ç¡®è®¤: å…·ä½“é¢˜æç»†èŠ‚ | æ˜¯å¦éœ€è¦å¤§çº²                       â”‚
â”‚  âœ… ä¿¡æ¯å·²è¶³å¤ŸæŠ¥ä»·                                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ’¬ æ¨èå›å¤ï¼ˆé€‰æ‹©å¤åˆ¶ï¼‰                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ 1. å¥½çš„å‘¢ï½5000å­—æœ«æ—¥çŸ­ç¯‡ä¸‹å‘¨äº”å®Œå…¨æ²¡é—®é¢˜ï¼Œç»™æ‚¨æŠ¥ä¸ªä»·... â”‚ [å¤åˆ¶] â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚ 2. æ”¶åˆ°ï½æœ«æ—¥å®‰å…¨å±‹é¢˜æå¾ˆæœ‰æ„æ€ï¼æƒ³ç¡®è®¤ä¸€ä¸‹ï¼Œæ‚¨å¯¹æ•…äº‹... â”‚ [å¤åˆ¶] â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚ 3. æ‚¨å¥½ï¼Œ5000å­—çŸ­ç¯‡å°è¯´å¯ä»¥çš„ã€‚è¯·é—®æœ‰å…·ä½“çš„æƒ…èŠ‚è¦æ±‚å—... â”‚ [å¤åˆ¶] â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                 â”‚
â”‚  ğŸ·ï¸ å¿«æ·æ ‡ç­¾: [è¯¢é—®å­—æ•°] [è¯¢é—®æˆªæ­¢] [è¯¢é—®ç»†èŠ‚] [å‘é€æŠ¥ä»·]       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ’° æŠ¥ä»·å‚è€ƒ: Â¥200 - Â¥300                                       â”‚
â”‚  è®¡ç®—ä¾æ®: çŸ­ç¯‡å°è¯´ 40-60å…ƒ/åƒå­— Ã— 5åƒå­—                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### ç»“æŸä¼šè¯å¼¹çª—

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ç»“æŸä¼šè¯                                       [Ã—]  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                     â”‚
â”‚  æˆäº¤çŠ¶æ€                                           â”‚
â”‚  â—‹ å·²æˆäº¤  â—‹ æœªæˆäº¤  â—‹ å¾…å®š                        â”‚
â”‚                                                     â”‚
â”‚  [è‹¥å·²æˆäº¤]                                         â”‚
â”‚  æˆäº¤ä»·æ ¼: â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚
â”‚           â”‚ 250                 â”‚ å…ƒ                â”‚
â”‚           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚
â”‚                                                     â”‚
â”‚  æ–‡ç« ç±»å‹: â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚
â”‚           â”‚ çŸ­ç¯‡å°è¯´         â–¼  â”‚                  â”‚
â”‚           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚
â”‚                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ ğŸ“‹ éœ€æ±‚è¦ç‚¹ï¼ˆè‡ªåŠ¨æç‚¼ï¼‰                        â”‚ â”‚
â”‚  â”‚ â€¢ ç±»å‹ï¼šæœ«æ—¥é¢˜æçŸ­ç¯‡å°è¯´                       â”‚ â”‚
â”‚  â”‚ â€¢ å­—æ•°ï¼š5000å­—                                 â”‚ â”‚
â”‚  â”‚ â€¢ æˆªæ­¢ï¼šä¸‹å‘¨äº”                                 â”‚ â”‚
â”‚  â”‚ â€¢ è¦æ±‚ï¼šå®‰å…¨å±‹è®¾å®šã€ç”Ÿå­˜ä¸»é¢˜                   â”‚ â”‚
â”‚  â”‚ â€¢ å¤‡æ³¨ï¼šéœ€è¦ç´§å¼ åˆºæ¿€çš„æƒ…èŠ‚                     â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                           [å¤åˆ¶]    â”‚
â”‚                                                     â”‚
â”‚  [è‹¥æœªæˆäº¤]                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ ğŸ’¡ æŒ½ç•™è¯æœ¯ï¼ˆå¯ç¼–è¾‘åå¤åˆ¶ï¼‰                    â”‚ â”‚
â”‚  â”‚ è™½ç„¶å› ä¸ºé¢„ç®—æ²¡æˆï¼Œä½†ç‰¹åˆ«æ„¿æ„å¸®ä½ æŠŠæŠŠå…³ï½       â”‚ â”‚
â”‚  â”‚ ä½ å¯ä»¥ç»™æˆ‘é“¾æ¥ä¸‹ä¸€ä¸ª10rè®¢å•...                 â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                           [å¤åˆ¶]    â”‚
â”‚                                                     â”‚
â”‚               [ å–æ¶ˆ ]  [ ç¡®è®¤ç»“æŸ ]                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### å†å²è®°å½•åˆ—è¡¨ï¼ˆæ›´æ–°ï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“‹ å†å²è®°å½•                                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ” æœç´¢...                    [ç±»å‹ â–¼] [çŠ¶æ€ â–¼] [æ—¶é—´ â–¼]       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ 12-30 14:23  çŸ­ç¯‡å°è¯´  [å·²æˆäº¤ Â¥250]              [åˆ é™¤] â”‚   â”‚
â”‚  â”‚ "ä½ èƒ½å†™æœ«æ—¥å®‰å…¨å±‹ç±»å‹çš„çŸ­ç¯‡å°è¯´å—..."                    â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚ 12-30 10:15  æ¼”è®²ç¨¿    [æœªæˆäº¤]                   [åˆ é™¤] â”‚   â”‚
â”‚  â”‚ "å¸®æˆ‘å†™ä¸€ç¯‡å…³äºç¯ä¿çš„æ¼”è®²ç¨¿..."                          â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚ 12-29 16:42  è°ƒæŸ¥æŠ¥å‘Š  [å·²æˆäº¤ Â¥180]              [åˆ é™¤] â”‚   â”‚
â”‚  â”‚ "éœ€è¦ä¸€ä»½å¸‚åœºè°ƒæŸ¥æŠ¥å‘Š..."                                â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 11.3 API ç«¯ç‚¹è®¾è®¡ï¼ˆV3 æ–°å¢ï¼‰

| æ–¹æ³• | ç«¯ç‚¹ | åŠŸèƒ½ |
|------|------|------|
| POST | /api/sessions | åˆ›å»ºæ–°ä¼šè¯ |
| GET | /api/sessions | è·å–ä¼šè¯åˆ—è¡¨ï¼ˆæ”¯æŒç­›é€‰çŠ¶æ€ï¼‰ |
| GET | /api/sessions/{id} | è·å–ä¼šè¯è¯¦æƒ…ï¼ˆå«æ‰€æœ‰æ¶ˆæ¯ï¼‰ |
| PATCH | /api/sessions/{id} | æ›´æ–°ä¼šè¯ï¼ˆçŠ¶æ€ã€æˆäº¤ä¿¡æ¯ï¼‰ |
| DELETE | /api/sessions/{id} | åˆ é™¤ä¼šè¯ |
| POST | /api/sessions/{id}/messages | æ·»åŠ æ¶ˆæ¯å¹¶è·å–AIåˆ†æ |
| GET | /api/sessions/{id}/messages | è·å–ä¼šè¯æ¶ˆæ¯åˆ—è¡¨ |
| GET | /api/quick-tags | è·å–å¿«æ·æ ‡ç­¾åˆ—è¡¨ |
| GET/PUT | /api/retention-template | è·å–/æ›´æ–°æŒ½ç•™è¯æœ¯æ¨¡æ¿ |

### 11.4 æ•°æ®åº“è¡¨è®¾è®¡ï¼ˆV3 æ–°å¢ï¼‰

```sql
-- ä¼šè¯è¡¨
CREATE TABLE sessions (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    status TEXT DEFAULT 'active',        -- active, closed
    deal_status TEXT DEFAULT 'pending',  -- pending, success, failed
    deal_price INTEGER,                  -- æˆäº¤ä»·æ ¼ï¼ˆåˆ†ï¼‰
    article_type TEXT,                   -- æ–‡ç« ç±»å‹
    requirement_summary TEXT,            -- éœ€æ±‚è¦ç‚¹æ‘˜è¦ï¼ˆJSONï¼‰
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- æ¶ˆæ¯è¡¨
CREATE TABLE messages (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    session_id INTEGER NOT NULL,
    role TEXT NOT NULL,                  -- buyer, seller
    content TEXT NOT NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (session_id) REFERENCES sessions(id) ON DELETE CASCADE
);

-- AI åˆ†æç»“æœè¡¨
CREATE TABLE ai_analyses (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    session_id INTEGER NOT NULL,
    message_id INTEGER NOT NULL,
    suggested_replies TEXT NOT NULL,     -- JSON æ•°ç»„
    extracted_info TEXT NOT NULL,        -- JSON å¯¹è±¡
    missing_info TEXT NOT NULL,          -- JSON æ•°ç»„
    can_quote BOOLEAN DEFAULT FALSE,
    price_min INTEGER,
    price_max INTEGER,
    price_basis TEXT,
    quick_tags TEXT NOT NULL,            -- JSON æ•°ç»„
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (session_id) REFERENCES sessions(id) ON DELETE CASCADE,
    FOREIGN KEY (message_id) REFERENCES messages(id) ON DELETE CASCADE
);

-- æŒ½ç•™è¯æœ¯æ¨¡æ¿è¡¨
CREATE TABLE retention_templates (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    content TEXT NOT NULL,
    is_default BOOLEAN DEFAULT FALSE,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```

---

## åã€é™„å½•

### A. é˜¿é‡Œäº‘DNSé…ç½®å‚è€ƒ

| è®°å½•ç±»å‹ | ä¸»æœºè®°å½• | è®°å½•å€¼ |
|----------|----------|--------|
| A | xianyu | 111.231.107.149 |

### B. å¼€å‘ç¯å¢ƒ

```bash
# Python ç¯å¢ƒ
/opt/miniconda3/envs/xianyu/bin/python

# Node.js ç¯å¢ƒ
export NVM_DIR="$HOME/.nvm" && [ -s "$NVM_DIR/nvm.sh" ] && \. "$NVM_DIR/nvm.sh"
nvm use 22
```

---

**æ–‡æ¡£çŠ¶æ€ï¼šV4 å·²å®Œæˆ**
